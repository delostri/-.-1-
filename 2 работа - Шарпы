using System;

// базовый класс - трансп средство
// основая инфа о транспорте
public class Transport
{
    // поля базового класса (данные передаются от пользователя через конструктор)
    public string Brand { get; set; }      // Марка транспорта
    public int Year { get; set; }          // Год выпуска

    // конструктор базового класса (сюда передаются данные при создании объекта)
    public Transport(string brand, int year)
    {
        Brand = brand;
        Year = year;
        Console.WriteLine($"cоздан транспорт: {Brand}, {Year} год");
    }

    public virtual void DisplayInfo()
    {
        Console.WriteLine($"транспорт: {Brand}, {Year} год выпуска");
    }
}

// подкласс 1 легковой автомобиль (наследует от Transport)
// наследует все поля и методы Transport добавляет свои
public class Car : Transport
{
    // доп поля подкласса
    public int Doors { get; set; }         // Количество дверей
    public string Color { get; set; }      // Цвет автомобиля

    public Car(string brand, int year, int doors, string color)
        : base(brand, year)  // Передача данных в родительский класс
    {
        Doors = doors;      // Данные сохраняются в подклассе
        Color = color;
        Console.WriteLine($"это автомобиль с {Doors} дверями, цвет: {Color}");
    }

    // переопредел метода
    public override void DisplayInfo()
    {
        base.DisplayInfo();  // Вызов метода из базового класса
        Console.WriteLine($"автомобиль: {Doors} дверей, цвет {Color}");
    }

    public void Honk()
    {
        Console.WriteLine($"{Brand} бибикает: бип!");
    }
}

// подкласс 2 грузовик 
public class Truck : Transport
{
    // дополнительные поля подкласса
    public double LoadCapacity { get; set; }  // груз в тоннах
    public bool HasTrailer { get; set; }      // наличие прицепа

 
    public Truck(string brand, int year, double capacity, bool hasTrailer)
        : base(brand, year)  
    {
        LoadCapacity = capacity;    
        HasTrailer = hasTrailer;
        Console.WriteLine($"это грузовик грузоподъемностью {LoadCapacity} т");
    }

    // Переопределение метода
    public override void DisplayInfo()
    {
        base.DisplayInfo(); 
        Console.WriteLine($"грузовик: {LoadCapacity} т, прицеп: {(HasTrailer ? "есть" : "нет")}");
    }

    public void LoadCargo(double weight)
    {
        if (weight <= LoadCapacity)
            Console.WriteLine($"{Brand} загружен {weight} тоннами");
        else
            Console.WriteLine($"{Brand} не может взять {weight} т (максимум {LoadCapacity} т)");
    }
}

class Program
{
    static void Main()
    {

        Console.WriteLine("создание объектов и передача данных между классами\n");


        Console.WriteLine("1. создание обьектов:");



        Car myCar = new Car("Toyota", 2020, 4, "Red");

        Console.WriteLine();  

        Truck myTruck = new Truck("Volvo", 2018, 10.5, true);

Console.WriteLine();


        Console.WriteLine("2. вызов методов:");


        // Вызов переопределенного метода (данные идут из полей объекта в метод)
        Console.WriteLine("\nинформация об автомобиле:");
        myCar.DisplayInfo();  

        Console.WriteLine("\nинформация о грузовике:");
        myTruck.DisplayInfo();


        Console.WriteLine();
        Console.WriteLine("3. уникальные методы подклассов:");



        myCar.Honk();  


        myTruck.LoadCargo(8.0);  
        myTruck.LoadCargo(12.0);

        Console.WriteLine();

        Console.WriteLine("4. применение полиморфизма:");


        Transport[] garage = new Transport[3];

        garage[0] = new Car("BMW", 2021, 2, "Black");
        garage[1] = new Truck("MAN", 2019, 15.0, false);
        garage[2] = new Car("Honda", 2017, 4, "Blue");

        Console.WriteLine("\nобход гаража через базовый класс:");
        foreach (Transport vehicle in garage)
        {
            vehicle.DisplayInfo();
            Console.WriteLine("---");
        }

        Console.WriteLine();
        Console.WriteLine("программа завершена, нажмите любую клавишу");
        Console.ReadKey();
    }
}
